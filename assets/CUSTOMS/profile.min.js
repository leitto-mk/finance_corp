$(document).ready(function(){if($("div").is(".profiles")){function e(e){e=e||"all",$("#std_table").DataTable({destroy:!0,lengthMenu:[50,100,250],processing:!0,serverSide:!0,ajax:{url:"ajax_get_students",method:"POST",data:{room:e},dataSrc:e=>{let a=1;for(let t in e.data)e.data[t].Number=a,a++;return e.data},error:e=>console.log(e)},columns:[{data:"Number",orderable:!1},{data:"IDNumber",createdCell:e=>e.setAttribute("align","center")},{data:"Fullname"},{data:"NickName"},{data:"Gender",orderable:!1},{data:"DateofBirth",createdCell:e=>e.setAttribute("align","center"),orderable:!1},{data:"status",createdCell:e=>e.setAttribute("align","center"),orderable:!1},{data:"Kelas",createdCell:e=>e.setAttribute("align","center"),orderable:!1},{data:"Ruangan",createdCell:e=>e.setAttribute("align","center"),orderable:!1},{data:e=>`<a class="btn font-white bg-blue text-center" style="min-height: 10px; min-width: 80px;" href="load_prof_std/${e.IDNumber}">\n\t\t\t\t\t\t\t\t\t\tProfile\n\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t<a class="btn btn-primary text-center" style="min-height: 10px; min-width: 80px;" href="load_prof_std_update/${e.IDNumber}">\n\t\t\t\t\t\t\t\t\t\tEdit\n\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t<a class="btn btn-danger text-center" style="min-height: 10px; min-width: 80px;" href="delete/${e.IDNumber}">\n\t\t\t\t\t\t\t\t\t\tDelete\n\t\t\t\t\t\t\t\t\t</a>`,createdCell:e=>e.setAttribute("align","center"),orderable:!1}]})}var a,t,n,i,r,l,m,s,o,c,u,p,d,v,h,f,g,_,b,k,y,w,C,x,S,O,T,j,N,B,F,P,I,R,D,M,L,A,E,J,U,K,q,W,Y,G,z,H,Q,V,X,Z,ee,ae,te,ne,ie,re,le,me,se,oe,$e,ce,ue,pe,de,ve,he,fe,ge,_e,be,ke,ye,we,Ce,xe,Se,Oe,Te;function je(){a=$('input[name="fname"]').val(),t=$('input[name="lname"]').val(),n=$('input[name="gender"]:checked').val(),i=$('input[name="nisn"]').val(),r=$('input[name="nik"]').val(),l=$('input[name="kk"]').val(),m=$('input[name="tgllhr"]').val(),s=$('input[name="tmplhr"]').val(),o=$('input[name="akta"]').val(),c=$('select[name="religion"]').val(),u=$('select[name="country"]').val(),p=$('input[name="disabled"]').val(),d=$('input[name="address"]').val(),v=$('input[name="rt"]').val(),h=$('input[name="rw"]').val(),f=$('input[name="dusun"]').val(),g=$('input[name="village"]').val(),_=$('input[name="district"]').val(),b=$('input[name="region"]').val(),k=$('input[name="postal"]').val(),y=$('select[name="livewith"]').val(),w=$('select[name="transport"]').val(),C=$('input[name="lintang"]').val(),x=$('input[name="bujur"]').val(),S=$('input[name="child"]').val(),O=$('input[name="kip"]:checked').val(),T=$('input[name="keepkip"]:checked').val(),j=$('select[name="refusepip"]').val(),N=$('input[name="housephone"]').val(),B=$('input[name="handheldnumber"]').val(),F=$('input[name="email"]').val(),P=$('input[name="father"]').val(),I=$('input[name="fathernik"]').val(),R=$('input[name="fatheryear"]').val(),D=$('select[name="fatherdegree"]').val(),M=$('select[name="fatherjob"]').val(),L=$('select[name="fatherincome"]').val(),A=$('input[name="fatherdisabled"]').val(),E=$('input[name="mother"]').val(),J=$('input[name="mothernik"]').val(),U=$('input[name="motheryear"]').val(),K=$('select[name="motherdegree"]').val(),q=$('select[name="motherjob"]').val(),W=$('select[name="motherincome"]').val(),Y=$('input[name="motherdisabled"]').val(),G=$('input[name="guardian"]').val(),z=$('input[name="guardiannik"]').val(),H=$('input[name="guardianyear"]').val(),Q=$('select[name="guardiandegree"]').val(),V=$('select[name="guardianjob"]').val(),X=$('select[name="guardianincome"]').val(),Z=$('input[name="guardiandisabled"]').val(),ee=$('input[name="height"]').val(),ae=$('input[name="weight"]').val(),te=$('input[name="headdiameter"]').val(),ne=$('input[name="range"]:checked').val(),ie=$('input[name="exactrange"]').val(),re=$('input[name="timerange"]').val(),le=$('input[name="siblings"]').val(),me=$('input[name="achievement"]:checked').val(),se=$('input[name="achievementlevel"]:checked').val(),oe=$('input[name="ach_name"]').val(),$e=$('input[name="ach_year"]').val(),ce=$('input[name="sponsor"]').val(),ue=$('input[name="ach_rank"]').val(),pe=$('input[name="scholarship"]:checked').val(),de=$('input[name="scholardesc"]').val(),ve=$('input[name="scholarstart"]').val(),he=$('input[name="scholarfinish"]').val(),fe=$('select[name="prosperity"]').val(),ge=$('input[name="prospernumber"]').val(),_e=$('input[name="prospernametag"]').val(),be=$('input[name="competition"]').val(),ke=$('input[name="registration"]:checked').val(),Te=$('input[name="nis"]').val(),ye=$('select[name="classes"]').val(),we=$('select[name="room"]').val(),Ce=$('input[name="previousschool"]').val(),xe=$('input[name="unnumber"]').val(),Se=$('input[name="diploma"]').val(),Oe=$('input[name="skhun"]').val()}function Ne(){$('input[name="confirm_fname"]').val(`${a}`),$('input[name="confirm_lname"]').val(`${t}`),$(`input[name="confirm_gender"][value="${n}"]`).attr("checked","checked"),$('input[name="confirm_nisn"]').val(`${i}`),$('input[name="confirm_nik"]').val(`${r}`),$('input[name="confirm_kk"]').val(`${l}`),$('input[name="confirm_tgllhr"]').val(`${m}`),$('input[name="confirm_tmplhr"]').val(`${s}`),$('input[name="confirm_akta"]').val(`${o}`),$('input[name="confirm_religion"]').val(`${c}`),$('input[name="confirm_country"]').val(`${u}`),$('input[name="confirm_disabled"]').val(`${p}`),$('input[name="confirm_address"]').val(`${d}`),$('input[name="confirm_rt"]').val(`${v}`),$('input[name="confirm_rw"]').val(`${h}`),$('input[name="confirm_dusun"]').val(`${f}`),$('input[name="confirm_village"]').val(`${g}`),$('input[name="confirm_district"]').val(`${_}`),$('input[name="confirm_region"]').val(`${b}`),$('input[name="confirm_postal"]').val(`${k}`),$('input[name="confirm_livewith"]').val(`${y}`),$('input[name="confirm_transport"]').val(`${w}`),$('input[name="confirm_lintang"]').val(`${C}`),$('input[name="confirm_bujur"]').val(`${x}`),$('input[name="confirm_child"]').val(`${S}`),$(`input[name="confirm_kip"][value="${O}"]`).attr("checked","checked"),$(`input[name="confirm_keepkip"][value="${T}"]`).attr("checked","checked"),$('input[name="confirm_refusepip"]').val(`${j}`),$('input[name="confirm_housephone"]').val(`${N}`),$('input[name="confirm_handheldnumber"]').val(`${B}`),$('input[name="confirm_email"]').val(`${F}`),$('input[name="confirm_father"]').val(`${P}`),$('input[name="confirm_fathernik"]').val(`${I}`),$('input[name="confirm_fatheryear"]').val(`${R}`),$('input[name="confirm_fatherdegree"]').val(`${D}`),$('input[name="confirm_fatherjob"]').val(`${M}`),$('input[name="confirm_fatherincome"]').val(`${L}`),$('input[name="confirm_fatherdisabled"]').val(`${A}`),$('input[name="confirm_mother"]').val(`${E}`),$('input[name="confirm_mothernik"]').val(`${J}`),$('input[name="confirm_motheryear"]').val(`${U}`),$('input[name="confirm_motherdegree"]').val(`${K}`),$('input[name="confirm_motherjob"]').val(`${q}`),$('input[name="confirm_motherincome"]').val(`${W}`),$('input[name="confirm_motherdisabled"]').val(`${Y}`),$('input[name="confirm_guardian"]').val(`${G}`),$('input[name="confirm_guardiannik"]').val(`${z}`),$('input[name="confirm_guardianyear"]').val(`${H}`),$('input[name="confirm_guardiandegree"]').val(`${Q}`),$('input[name="confirm_guardianjob"]').val(`${V}`),$('input[name="confirm_guardianincome"]').val(`${X}`),$('input[name="confirm_guardiandisabled"]').val(`${Z}`),$('input[name="confirm_height"]').val(`${ee}`),$('input[name="confirm_weight"]').val(`${ae}`),$('input[name="confirm_headdiameter"]').val(`${te}`),$(`input[name="confirm_range"][value="${ne}"]`).attr("checked","checked"),$('input[name="confirm_exactrange"]').val(`${ie}`),$('input[name="confirm_timerange"]').val(`${re}`),$('input[name="confirm_siblings"]').val(`${le}`),$(`input[name="confirm_achievement"][value="${me}"]`).attr("checked","checked"),$(`input[name="confirm_achievementlevel"][value="${se}"]`).attr("checked","checked"),$('input[name="confirm_ach_name"]').val(`${oe}`),$('input[name="confirm_ach_year"]').val(`${$e}`),$('input[name="confirm_sponsor"]').val(`${ce}`),$('input[name="confirm_ach_rank"]').val(`${ue}`),$(`input[name="confirm_scholarship"][value="${pe}"]`).attr("checked","checked"),$('input[name="confirm_scholardesc"]').val(`${de}`),$('input[name="confirm_scholarstart"]').val(`${ve}`),$('input[name="confirm_scholarfinish"]').val(`${he}`),$('input[name="confirm_prosperity"]').val(`${fe}`),$('input[name="confirm_prospernumber"]').val(`${ge}`),$('input[name="confirm_prospernametag"]').val(`${_e}`),$('input[name="confirm_competition"]').val(`${be}`),$(`input[name="confirm_registration"][value="${ke}"]`).attr("checked","checked"),$('input[name="confirm_nis"]').val(`${Te}`),$('input[name="confirm_classes"]').val(`${ye}`),$('input[name="confirm_room"]').val(`${we}`),$('input[name="confirm_unnumber"]').val(`${xe}`),$('input[name="confirm_diploma"]').val(`${Se}`),$('input[name="confirm_skhun"]').val(`${Oe}`)}if(e(),$(".search_person").keyup(function(){let e=$(this).val(),a=$(this).attr("data-emp");$.ajax({url:"get_person_name",method:"POST",datatype:"JSON",data:{output:e,emp:a},success:e=>{$(".emp_t_body").empty(),$(".emp_t_body").append(e)}})}),$(".classes").change(function(){e($(this).val())}),$("#institute").change(function(){$(this).is(":checked")?$(this).val("yes"):$(this).val("no")}),$('input[name="newtgllhr"]').inputmask("99/99/9999",{clearMaskOnLostFocus:!1}),$('input[name="tgllhr"]').inputmask("99/99/9999",{clearMaskOnLostFocus:!1}),$('input[name="newphonenumber"]').inputmask("(9999) 999-999",{clearMaskOnLostFocus:!1}),$('input[name="housephone"]').inputmask("(9999) 999-999",{clearMaskOnLostFocus:!1}),$('input[name="newphone"]').inputmask("(+62) 999-9999-9999",{clearMaskOnLostFocus:!1}),$('input[name="handheldnumber"]').inputmask("(+62) 999-9999-9999",{clearMaskOnLostFocus:!1}),$('input[name="newtelp]').inputmask("(+62) 999-9999-9999",{clearMaskOnLostFocus:!1}),$("#inputFile").change(function(){!function(e){if(e.files&&e.files[0]){var a=new FileReader,t=$("#inputFile").val();t=t.substring(t.lastIndexOf("\\")+1),a.onload=function(e){$(".img-prev").attr("src",e.target.result),$(".img-prev").css("max-width","100%"),$(".img-prev").css("max-height","100%"),$(".img-prev").hide(),$(".img-prev").fadeIn(500)},a.readAsDataURL(e.files[0])}}(this)}),$.ajax({url:`${base_url}assets/CUSTOMS/countries.json`,method:"POST",dataType:"JSON",success:function(e){for(let a=0;a<e.length;a++)"Indonesia"===e[a].name?$('select[name="country"]').append(`<option value="${e[a].name}" selected> ${e[a].name} </option>`):$('select[name="country"]').append(`<option value="${e[a].name}"> ${e[a].name} </option>`)},error:function(){console.log("ERROR")}}),$('select[name="homeroom"]').change(e=>{let a=$(e.target).val();$.ajax({url:"get_homeroom_availability",method:"POST",datatype:"JSON",data:{room:a},success:e=>{e=JSON.parse(e),console.log(e.Response),"true"==e.Response&&Swal.fire({type:"warning",title:"Unable to set on an assigned Class",text:`Room has already been assigned with another teacher: ${e.Name}`})}})}),$('input[type="text"], input[type="date"], input[type="number"], select option:selected').focusout(function(){if(""==$(this).val()||"-"==$(this).val()){$(this).parent(".form-group").removeClass("has-success"),$(this).parent(".form-group").addClass("has-error");let e=$(this).closest(".help-block");e.addClass("has-error"),e.css("opacity","1")}else $(this).parent(".form-group").removeClass("has-error"),$(this).parent(".form-group").addClass("has-success")}),$('input[type="radio"]').click(function(){if($(this).is(":checked")){let e=$(this).attr("name");$(`input[name="${e}"]`).closest(".md-radio").removeClass("has-error")}}),$('input[name="kip"]').click(function(){"no"==$(this).val()?$('input[name="keepkip"]').attr("disabled","disabled"):$('input[name="keepkip"]').removeAttr("disabled")}),$('input[name="range"]').on("change",function(){"< 1 KM"==$(this).val()?$(".meters").text("(Meter)"):$(".meters").text("(Kilometer)")}),$(".add-std .classes").change(function(){let e=$(this).val();$.ajax({url:"get_room_from_selected_class",method:"POST",data:{cls:e},success:function(e){$("option").parent('select[name="room"]').html(e)},error:function(){alert("ERROR")}})}),$("li").children("a").on("click",function(){je(),"#tab5"==$(this).attr("href")&&Ne()}),$(".button-next").on("click",function(){let e=$(this).parents(".tab-pane").attr("id"),Be=$(`#${e}`).next().attr("id");var Fe;je(),"tab1"==e?($(".step-title").text("STEP 2 OF 4"),Fe=[a,t,n,i,r,l,m,s,o,c,u,p,d,v,h,f,g,_,b,k,y,w,C,x,S,O,T,j,N,B,F,P,I,R,D,M,L,A,E,J,U,K,q,W,Y,G,z,H,Q,V,X,Z]):"tab2"==e?($(".step-title").text("STEP 3 OF 4"),Fe=[ee,ae,te,ne,ie,re,le,me,se,oe,$e,ce,ue,pe,de,ve,he,fe,ge,_e]):"tab3"==e?($(".step-title").text("STEP 4 OF 4"),Fe=[be,ke,Te,ye,we,Ce,xe,Se,Oe],Ne()):"tab4"==e&&($(".step-title").text("STEP 5 OF 5"),Fe=[void 0],Ne()),console.dir(Fe),$(`a[href="#${e}"]`).parent("li").removeClass("active"),$(`a[href="#${e}"]`).parent("li").addClass("done"),$(`#${e}`).removeClass("active"),$(`a[href="#${Be}"]`).parent("li").addClass("active"),$(`#${Be}`).addClass("active"),$("html, body").animate({scrollTop:0},750)}),$(".button-back").click(function(){let e=$(this).parents(".tab-pane").attr("id"),a=$(`#${e}`).prev().attr("id"),t=$(`a[href="#${a}"]`).children(".number").text(),n=t/4*100;console.log(`${e} | ${a} | ${t}`),$(`a[href="#${e}"]`).parent("li").removeClass("active"),$(`#${e}`).removeClass("active"),$(`a[href="#${a}"]`).parent("li").addClass("active"),$(`#${a}`).addClass("active"),$(".progress-bar .progress-bar-success").css("width",`${n}% !important`),$("html, body").animate({scrollTop:0},750)}),$(".button-submit").click(function(){Swal.fire({title:"Lanjutkan?",text:"Pastikan data telah sesuai dengan form yang diminta sebelum dikirim!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Ya"}).then(e=>{e.value&&(""==$('input[name="nis"]').val()||"-"==$('select[name="classes"]').val()?Swal.fire({type:"error",title:"Cannot Proceed",text:"Either NIS or Class was left empty, please fill the form before continue"}):$("#submit_form").submit())})}),$(".btn_upd_std").click(function(){Swal.fire({title:"Lanjutkan?",text:"Pastikan data telah sesuai dengan form yang diminta sebelum dikirim!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Ya"}).then(e=>{e.value&&$(".upd-std").submit()})}),$("div").hasClass("saved-success")){var Be=$(".saved-success").attr("data-id");$("html, body").animate({scrollTop:$(`tr[data-id="${Be}"]`).offset().top},1e3),$(`tr[data-id="${Be}"]`).fadeIn("slow",function(){$(this).css("background-color","bisque")}),Swal.fire({type:"success",title:"New Student has been Added",showConfirmButton:!1,timer:2e3})}else if($("div").hasClass("regis-alert")){Be=$(".regis-alert").attr("data-id");$("html, body").animate({scrollTop:$(`tr[data-id="${Be}"]`).offset()},1e3),$(`tr[data-id="${Be}"]`).fadeIn("slow",function(){$(this).css("background-color","bisque")}),Swal.fire({type:"warning",title:"ID/NIS has already been registered",showConfirmButton:!1,timer:2e3})}else $("div").hasClass("error-alert")?Swal.fire({type:"error",title:"Something's Wrong",showConfirmButton:!1,timer:2e3}):$("div").hasClass("delete-success")?Swal.fire({type:"success",title:"Data has been deleted",showConfirmButton:!1,timer:2e3}):$("div").hasClass("upd-success")?Swal.fire({type:"success",title:"Student Data has been Updated",showConfirmButton:!1,timer:2e3}):$("div").hasClass("alert-upd")&&Swal.fire({type:"error",title:"Something's Wrong",showConfirmButton:!1,timer:2e3})}});